<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Haxademic.js</title>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/barebones.css">
    <link rel="stylesheet" href="../css/haxademic.css">
    <script src="../src/dom-util.es6.js"></script>
    <script src="../src/error-util.es6.js"></script>
    <script src="../src/url-util.es6.js"></script>
    <script src="../src/video-recorder.es6.js"></script>
    <script src="./demo--base.es6.js"></script>
  </head>
  <body>
    <script type="text/javascript">
      // demos should auto-init to append to <body>
      window.autoInitDemo = true;

      // get demo name & turn into javascript include
      let demo = (document.location.hash.indexOf('&') == -1) ? document.location.hash : document.location.hash.split('&')[0]; // URLUtil.getHashQueryVariable('demo')
      // let demoJsFile = `./demo-${demo}.es6.js`;
      let demoJsFile = `./demo-${demo.substring(1)}.es6.js?v=${Math.round(Math.random() * 9999999)}`;
      if(demo) {
        console.log("Loading demo: ", demoJsFile);
        ErrorUtil.initErrorCatching();
        DOMUtil.loadJavascript(demoJsFile);
      } else {
        document.body.innerHTML = `
          <div class="container">
            <h1>Haxademic.js Demos</h1>
            <div>
              <ul>
                <li><a href="#date-util">DateUtil</a></li>
                <li><a href="#frame-loop">FrameLoop</a></li>
                <li><a href="#microphone-node">MicrophoneNode | SoundFFT</a></li>
                <li><a href="#mobile-util">MobileUtil</a></li>
                <li><a href="#object-pool-particles">ObjectPool | Particles</a></li>
                <li><a href="#object-pool-touch-ripples">ObjectPool | Touch Ripples</a></li>
                <li><a href="#p5-sketch-audio">P5SketchAudio</a></li>
                <li><a href="#pixi-stage">PixiStage</a></li>
                <li><a href="#pointer-pos">PointerPos</a></li>
                <li><a href="#screen-capture">ScreenCapture</a></li>
                <li><a href="#solid-socket">SolidSocket</a></li>
                <li><a href="#solid-socket-receive-pointer">SolidSocket | Receive Pointer</a></li>
                <li><a href="#sound-fft-video">SoundFFT | Video</a></li>
                <li><a href="#speech-recognizer">SpeechRecognizer</a></li>
                <li><a href="#speech-recognizer-solid-socket">SpeechRecognizer SolidSocket</a></li>
                <li><a href="#three-scene">ThreeScene</a></li>
                <li><a href="#three-scene-gltf">ThreeScene | glTF</a></li>
                <li><a href="#three-scene-custom-textured-shape">ThreeScene | Textured shape UV animation</a></li>
                <li><a href="#three-scene-text-texture">ThreeScene | Canvas text texture</a></li>
                <li><a href="#three-scene-video-texture">ThreeScene | Video texture</a></li>
                <li><a href="#three-scene-ar">ThreeSceneAr</a></li>
                <li><a href="#three-scene-fbo">ThreeScenePlane</a></li>
                <li><a href="#ui-control-panel">UIControlPanel</a></li>
                <li><a href="#qr-code">QRCode</a></li>
                <li><a href="#video-recorder">VideoRecorder</a></li>
                <li><a href="#webcam">Webcam</a></li>
              </ul>
            </div>
          </div>
        `;
      }

      // listen for hash changes
      window.addEventListener('popstate', () => document.location.reload());  // reload page on browser back button
    </script>
  </body>
</html>
